{
  "version": 3,
  "sources": ["../../Scripts/share-landing-designer.ts"],
  "sourcesContent": ["(() => {\n  const form = document.getElementById('share-template-form') as HTMLFormElement | null;\n  if (!form) return;\n\n  const currentScript = document.currentScript as HTMLScriptElement | null;\n  const initialBackgroundUrl = currentScript?.dataset.initialBackgroundUrl || '';\n\n  const titleInput = form.querySelector<HTMLInputElement>('[data-template-title]');\n  const h1Input = form.querySelector<HTMLInputElement>('[data-template-h1]');\n  const descriptionInput = form.querySelector<HTMLTextAreaElement>('[data-template-description]');\n  const backgroundFileInput = form.querySelector<HTMLInputElement>('[data-template-background-file]');\n  const backgroundUploadIdInput = form.querySelector<HTMLInputElement>('[data-template-background-upload-id]');\n  const backgroundColorHexInput = form.querySelector<HTMLInputElement>('[data-template-background-color-hex]');\n  const containerPositionInput = form.querySelector<HTMLInputElement>('[data-template-container-position]');\n  const containerPositionSelect = form.querySelector<HTMLSelectElement>('[data-template-container-position-select]');\n  const backgroundColorModeInput = form.querySelector<HTMLSelectElement>('[data-template-background-color-mode]');\n  const backgroundColorInput = form.querySelector<HTMLInputElement>('[data-template-background-color]');\n  const backgroundColorWrap = form.querySelector<HTMLElement>('[data-template-background-color-picker-wrap]');\n  const draftShareIdInput = form.querySelector<HTMLInputElement>('[data-draft-share-id]');\n  const uploadDropzone = form.querySelector<HTMLElement>('[data-template-upload-dropzone]');\n  const uploadPick = form.querySelector<HTMLButtonElement>('[data-template-upload-pick]');\n  const uploadStatus = form.querySelector<HTMLElement>('[data-template-upload-status]');\n\n  const previewSubtitle = document.querySelector<HTMLElement>('[data-share-preview-subtitle]');\n  const previewH1 = document.querySelector<HTMLElement>('[data-share-preview-h1]');\n  const previewDescription = document.querySelector<HTMLElement>('[data-share-preview-description]');\n  const previewSurface = document.querySelector<HTMLElement>('[data-preview-surface]');\n  const previewWrapper = document.querySelector<HTMLElement>('[data-preview-wrapper]');\n\n  if (\n    !titleInput ||\n    !h1Input ||\n    !descriptionInput ||\n    !backgroundFileInput ||\n    !backgroundUploadIdInput ||\n    !backgroundColorHexInput ||\n    !containerPositionInput ||\n    !containerPositionSelect ||\n    !backgroundColorModeInput ||\n    !backgroundColorInput ||\n    !backgroundColorWrap ||\n    !draftShareIdInput ||\n    !uploadDropzone ||\n    !uploadPick ||\n    !uploadStatus\n  ) {\n    return;\n  }\n\n  const defaultBackgroundColor = '#faf7f2';\n  let uploadedPreviewUrl = initialBackgroundUrl;\n\n  const allPositionClasses = [\n    'items-start',\n    'items-center',\n    'items-end',\n    'justify-start',\n    'justify-center',\n    'justify-end'\n  ];\n\n  const positionClassMap: Record<string, string[]> = {\n    top_left: ['items-start', 'justify-start'],\n    top_right: ['items-start', 'justify-end'],\n    bottom_left: ['items-end', 'justify-start'],\n    bottom_right: ['items-end', 'justify-end'],\n    center_right: ['items-center', 'justify-end'],\n    center_left: ['items-center', 'justify-start'],\n    center_top: ['items-start', 'justify-center'],\n    center_bottom: ['items-end', 'justify-center'],\n    center: ['items-center', 'justify-center']\n  };\n\n  const updatePreview = (): void => {\n    if (previewSubtitle) {\n      const subtitleText = titleInput.value || '';\n      previewSubtitle.textContent = subtitleText;\n      previewSubtitle.style.display = subtitleText ? '' : 'none';\n    }\n\n    if (previewH1) previewH1.textContent = h1Input.value || 'A file was shared with you';\n    if (previewDescription) previewDescription.textContent = descriptionInput.value || '';\n\n    if (previewSurface) {\n      previewSurface.style.backgroundColor = backgroundColorModeInput.value === 'custom' ? backgroundColorInput.value : defaultBackgroundColor;\n      previewSurface.style.backgroundImage = uploadedPreviewUrl ? `url(${uploadedPreviewUrl})` : '';\n      previewSurface.style.backgroundSize = uploadedPreviewUrl ? 'cover' : '';\n      previewSurface.style.backgroundPosition = uploadedPreviewUrl ? 'center' : '';\n    }\n\n    if (previewWrapper) {\n      previewWrapper.classList.remove(...allPositionClasses);\n      const next = positionClassMap[containerPositionInput.value] || positionClassMap.center;\n      previewWrapper.classList.add(...next);\n    }\n  };\n\n  const setStatus = (text: string, isError: boolean): void => {\n    uploadStatus.textContent = text;\n    uploadStatus.classList.remove('text-ink-muted', 'text-danger');\n    uploadStatus.classList.add(isError ? 'text-danger' : 'text-ink-muted');\n  };\n\n  const stageBackground = (file: File): void => {\n    setStatus('Uploading background image...', false);\n\n    const formData = new FormData();\n    formData.append('file', file, file.name);\n    formData.append('draftShareId', draftShareIdInput.value);\n\n    fetch('/api/uploads/stage-template-background', { method: 'POST', body: formData })\n      .then((response) => (response.ok ? response.json() : Promise.reject()))\n      .then((json: { uploadId?: string; fileName?: string }) => {\n        backgroundUploadIdInput.value = json.uploadId || '';\n        if (uploadedPreviewUrl && uploadedPreviewUrl.startsWith('blob:')) {\n          URL.revokeObjectURL(uploadedPreviewUrl);\n        }\n        uploadedPreviewUrl = URL.createObjectURL(file);\n        setStatus(`Uploaded: ${json.fileName || file.name}`, false);\n        updatePreview();\n      })\n      .catch(() => setStatus('Upload failed.', true));\n  };\n\n  const refreshColorMode = (): void => {\n    const isCustom = backgroundColorModeInput.value === 'custom';\n    backgroundColorWrap.classList.toggle('hidden', !isCustom);\n    backgroundColorHexInput.value = isCustom ? backgroundColorInput.value : '';\n    updatePreview();\n  };\n\n  [titleInput, h1Input, descriptionInput].forEach((el) => el.addEventListener('input', updatePreview));\n  backgroundColorModeInput.addEventListener('change', refreshColorMode);\n  backgroundColorInput.addEventListener('input', refreshColorMode);\n\n  containerPositionSelect.addEventListener('change', () => {\n    containerPositionInput.value = containerPositionSelect.value || 'center';\n    updatePreview();\n  });\n\n  uploadPick.addEventListener('click', () => backgroundFileInput.click());\n  backgroundFileInput.addEventListener('change', () => {\n    const file = backgroundFileInput.files?.[0];\n    if (file) stageBackground(file);\n  });\n\n  uploadDropzone.addEventListener('dragover', (event) => {\n    event.preventDefault();\n    uploadDropzone.classList.add('ring-2', 'ring-terra/40');\n  });\n  uploadDropzone.addEventListener('dragleave', () => uploadDropzone.classList.remove('ring-2', 'ring-terra/40'));\n  uploadDropzone.addEventListener('drop', (event) => {\n    event.preventDefault();\n    uploadDropzone.classList.remove('ring-2', 'ring-terra/40');\n    const file = event.dataTransfer?.files?.[0];\n    if (file) stageBackground(file);\n  });\n\n  refreshColorMode();\n  if (initialBackgroundUrl || backgroundUploadIdInput.value) {\n    setStatus('Uploaded background image selected.', false);\n  }\n})();\n"],
  "mappings": "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",
  "names": []
}
