{
  "version": 3,
  "sources": ["../../scripts/ts/template-designer-preview.ts"],
  "sourcesContent": ["(() => {\n  const script = document.currentScript as HTMLScriptElement | null;\n  const formId = script?.dataset.formId || 'account-template-form';\n  const form = document.getElementById(formId) as HTMLFormElement | null;\n  if (!form) return;\n\n  const titleInput = form.querySelector<HTMLInputElement>('[data-preview-title]');\n  const h1Input = form.querySelector<HTMLInputElement>('[data-preview-h1]');\n  const descriptionInput = form.querySelector<HTMLTextAreaElement>('[data-preview-description]');\n  const backgroundFileInput = form.querySelector<HTMLInputElement>('[data-preview-background-file]');\n  const backgroundColorModeInput = form.querySelector<HTMLSelectElement>('[data-preview-background-color-mode]');\n  const backgroundColorInput = form.querySelector<HTMLInputElement>('[data-preview-background-color]');\n  const backgroundColorWrap = form.querySelector<HTMLElement>('[data-preview-background-color-picker-wrap]');\n  const uploadPick = form.querySelector<HTMLButtonElement>('[data-preview-upload-pick]');\n  const uploadDropzone = form.querySelector<HTMLElement>('[data-preview-upload-dropzone]');\n  const uploadStatus = form.querySelector<HTMLElement>('[data-preview-upload-status]');\n\n  const titleTarget = document.getElementById('template-preview-title') || document.querySelector<HTMLElement>('[data-share-preview-subtitle]');\n  const h1Target = document.getElementById('template-preview-h1') || document.querySelector<HTMLElement>('[data-share-preview-h1]');\n  const descriptionTarget = document.getElementById('template-preview-description') || document.querySelector<HTMLElement>('[data-share-preview-description]');\n  const card = document.getElementById('template-preview-card') || document.querySelector<HTMLElement>('[data-preview-surface]');\n\n  if (!titleInput || !h1Input || !descriptionInput || !backgroundFileInput || !uploadPick || !uploadDropzone || !uploadStatus || !card) return;\n\n  const allowedExtensions = new Set(['.jpg', '.jpeg', '.png', '.svg', '.webp']);\n  let uploadedPreviewUrl = '';\n\n  const setStatus = (text: string, isError: boolean): void => {\n    uploadStatus.textContent = text;\n    uploadStatus.classList.remove('text-ink-muted', 'text-danger', 'text-sage');\n    uploadStatus.classList.add(isError ? 'text-danger' : 'text-ink-muted');\n  };\n\n  const updatePreview = (): void => {\n    if (titleTarget) titleTarget.textContent = titleInput.value || 'Shared file';\n    if (h1Target) h1Target.textContent = h1Input.value || 'A file was shared with you';\n    if (descriptionTarget) descriptionTarget.textContent = descriptionInput.value || '';\n\n    const customBackgroundColor =\n      backgroundColorModeInput &&\n      backgroundColorInput &&\n      backgroundColorModeInput.value === 'custom'\n        ? backgroundColorInput.value\n        : '';\n\n    (card as HTMLElement).style.backgroundColor = customBackgroundColor || '';\n    (card as HTMLElement).style.backgroundImage = uploadedPreviewUrl ? `url(${uploadedPreviewUrl})` : '';\n  };\n\n  const setSelectedFile = (file: File): void => {\n    const dt = new DataTransfer();\n    dt.items.add(file);\n    backgroundFileInput.files = dt.files;\n  };\n\n  const handleSelectedFiles = (files: FileList | File[]): void => {\n    const list = Array.from(files || []);\n    if (list.length === 0) return;\n    if (list.length > 1) {\n      setStatus('Only one image can be selected.', true);\n      return;\n    }\n\n    const file = list[0];\n    const ext = file.name.includes('.') ? file.name.toLowerCase().slice(file.name.lastIndexOf('.')) : '';\n    if (!allowedExtensions.has(ext)) {\n      setStatus('Only JPG, PNG, SVG, or WEBP files are allowed.', true);\n      return;\n    }\n\n    setSelectedFile(file);\n    if (uploadedPreviewUrl) URL.revokeObjectURL(uploadedPreviewUrl);\n    uploadedPreviewUrl = URL.createObjectURL(file);\n    setStatus(`Selected: ${file.name}`, false);\n    updatePreview();\n  };\n\n  [titleInput, h1Input, descriptionInput].forEach((el) => el.addEventListener('input', updatePreview));\n\n  if (backgroundColorModeInput && backgroundColorInput) {\n    const refreshColorMode = (): void => {\n      const isCustom = backgroundColorModeInput.value === 'custom';\n      backgroundColorWrap?.classList.toggle('hidden', !isCustom);\n      backgroundColorInput.name = isCustom ? 'backgroundColorHex' : '';\n      if (!isCustom) backgroundColorInput.value = '#faf7f2';\n      updatePreview();\n    };\n\n    backgroundColorModeInput.addEventListener('change', refreshColorMode);\n    backgroundColorInput.addEventListener('input', updatePreview);\n    refreshColorMode();\n  }\n\n  uploadPick.addEventListener('click', () => backgroundFileInput.click());\n  backgroundFileInput.addEventListener('change', () => handleSelectedFiles(backgroundFileInput.files || []));\n\n  uploadDropzone.addEventListener('dragover', (event) => {\n    event.preventDefault();\n    uploadDropzone.classList.add('ring-2', 'ring-terra/40');\n  });\n  uploadDropzone.addEventListener('dragleave', () => uploadDropzone.classList.remove('ring-2', 'ring-terra/40'));\n  uploadDropzone.addEventListener('drop', (event) => {\n    event.preventDefault();\n    uploadDropzone.classList.remove('ring-2', 'ring-terra/40');\n    handleSelectedFiles(event.dataTransfer?.files || []);\n  });\n\n  updatePreview();\n})();\n"],
  "mappings": "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",
  "names": []
}
