{
  "version": 3,
  "sources": ["../../scripts/ts/admin-index.ts"],
  "sourcesContent": ["(() => {\n  const registrationToggle = document.querySelector<HTMLInputElement>('[data-registration-toggle]');\n  registrationToggle?.addEventListener('change', () => {\n    registrationToggle.form?.submit();\n  });\n\n  document.querySelectorAll<HTMLFormElement>('form[data-confirm-submit]').forEach((form) => {\n    form.addEventListener('submit', (event) => {\n      const message = form.getAttribute('data-confirm-submit') || 'Are you sure?';\n      if (!window.confirm(message)) {\n        event.preventDefault();\n      }\n    });\n  });\n\n  const selects = document.querySelectorAll<HTMLSelectElement>('[data-user-role-select]');\n  const toggles = document.querySelectorAll<HTMLButtonElement>('[data-user-enabled-toggle]');\n  const toast = document.querySelector<HTMLElement>('[data-admin-toast]');\n  if ((selects.length === 0 && toggles.length === 0) || !toast) return;\n\n  const showToast = (message: string, isError: boolean): void => {\n    toast.innerHTML = '';\n    const node = document.createElement('div');\n    node.className = `pointer-events-auto px-4 py-2 rounded-lg text-sm shadow-lg border ${\n      isError\n        ? 'bg-danger-wash text-danger border-danger/20'\n        : 'bg-sage-wash text-sage border-sage/20'\n    }`;\n    node.textContent = message;\n    toast.appendChild(node);\n    toast.classList.remove('hidden');\n    window.setTimeout(() => {\n      toast.classList.add('hidden');\n      toast.innerHTML = '';\n    }, 2400);\n  };\n\n  const setEnabledToggleState = (button: HTMLButtonElement, isEnabled: boolean): void => {\n    button.setAttribute('data-next-enabled', String(!isEnabled));\n    button.textContent = isEnabled ? 'Disable' : 'Enable';\n    button.classList.remove('text-ink-muted', 'hover:text-danger', 'text-sage', 'hover:underline');\n    if (isEnabled) {\n      button.classList.add('text-ink-muted', 'hover:text-danger');\n      return;\n    }\n    button.classList.add('text-sage', 'hover:underline');\n  };\n\n  selects.forEach((select) => {\n    select.addEventListener('change', async () => {\n      const userId = select.getAttribute('data-user-id') || '';\n      const previousRole = select.getAttribute('data-current-role') || '';\n      const role = select.value || '';\n      if (!userId || !role || role === previousRole) return;\n\n      select.disabled = true;\n      try {\n        const formData = new FormData();\n        formData.append('role', role);\n        const response = await fetch(`/api/admin/users/${encodeURIComponent(userId)}/role`, {\n          method: 'POST',\n          body: formData\n        });\n\n        const payload = (await response.json().catch(() => ({}))) as { ok?: boolean; message?: string };\n        if (!response.ok || !payload.ok) throw new Error(payload.message || 'Unable to update role.');\n\n        select.setAttribute('data-current-role', role);\n        showToast('Role updated.', false);\n      } catch (error) {\n        select.value = previousRole;\n        showToast(error instanceof Error ? error.message : 'Unable to update role.', true);\n      } finally {\n        select.disabled = false;\n      }\n    });\n  });\n\n  toggles.forEach((button) => {\n    button.addEventListener('click', async () => {\n      const userId = button.getAttribute('data-user-id') || '';\n      const nextEnabled = button.getAttribute('data-next-enabled') === 'true';\n      if (!userId) return;\n\n      button.disabled = true;\n      try {\n        const formData = new FormData();\n        formData.append('enabled', nextEnabled ? 'true' : 'false');\n        const response = await fetch(`/api/admin/users/${encodeURIComponent(userId)}/enabled`, {\n          method: 'POST',\n          body: formData\n        });\n\n        const payload = (await response.json().catch(() => ({}))) as { ok?: boolean; message?: string };\n        if (!response.ok || !payload.ok) throw new Error(payload.message || 'Unable to update user status.');\n\n        const row = button.closest('tr');\n        const disabledBadge = row?.querySelector<HTMLElement>('[data-user-disabled-badge]');\n        if (disabledBadge) {\n          disabledBadge.classList.toggle('hidden', nextEnabled);\n        }\n\n        setEnabledToggleState(button, nextEnabled);\n        showToast(nextEnabled ? 'User enabled.' : 'User disabled.', false);\n      } catch (error) {\n        showToast(error instanceof Error ? error.message : 'Unable to update user status.', true);\n      } finally {\n        button.disabled = false;\n      }\n    });\n  });\n})();\n"],
  "mappings": "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",
  "names": []
}
